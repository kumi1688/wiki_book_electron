[
  {
    "title": "MQTT Broker 설치",
    "contents": [
      {
        "text": ["이번 장에서는 MQTT Broker를 설치하고 확인하는 법을 살펴본다"]
      }
    ]
  },
  {
    "title": "MQTT Broker 종류",
    "contents": [
      {
        "img": ["MQTT 종류.PNG"],
        "text": [
          "MQTT Broker는 현재 다양한 제품들이 있다. 위의 표에서 살펴보면 대략 10개가 넘는 브로커가 있는 것을 볼 수 있다. 위의 브로커들은 모두 MQTT 메시지를 전달하고 전달받을 수 있으므로 어느것을 사용해도 상관없지만 이번 장에서는 Mosquitto를 사용해보도록 한다",
          "위의 표에서 MQTT Client 부분은 MQTT를 지원하는 플랫폼들을 나열한 것이다. 현재 사용하고 있는 플랫폼의 MQTT 지원여부는 플랫폼 홈페이지를 확인해보도록 하자"
        ]
      }
    ]
  },
  {
    "title": "MQTT Broker 설치",
    "contents": [
      {
        "terminal": "sudo apt-get update",
        "text": [
          "sudo : 관리자 권한 실행",
          "apt-get update: 리눅스 운영체제의 최신 버전을 가져온다"
        ]
      },
      {
        "terminal": "sudo apt-get install mosquitto"
      },
      {
        "terminal": "sudo systemctl status mosquitto.service"
      },
      {
        "img": ["MQTT 설치2.PNG"],
        "text": ["설치에 성공하면 위와 같은 화면을 볼 수 있다"]
      },
      {
        "text": ["MQTT Client를 설치하기에 앞서 AWS 1883 포트를 열도록 하자."]
      }
    ]
  },

  {
    "title": "MQTT Client 설치",
    "contents": [
      {
        "text": [
          "이번장에서는 hello 라는 topic으로 메시지를 주고 받는 것을 연습해보자"
        ]
      },
      {
        "terminal": "sudo apt-get install mosquitto-clients",
        "text": ["먼저 메시지를 수신하는 컴퓨터에 mosquitto client를 설치한다"]
      },
      {
        "terminal": "mosquitto_sub -h 52.79.239.7 -t \"hello\"",
        "text": [
          "mosquitto subscribe 형식은 다음과 같다",
          "mosquitto_sub -h <HOST_IP> -t <TOPIC_NAME>",
          "위의 예시는 52.79.239.7 라는 broker에 hello라는 topic을 subscribe 하겠다는 뜻이다. 이제 ip가 52.79.239.7 인 broker에서 hello 라는 topic으로 전달되는 메시지는 현재 컴퓨터로 전달될 것이다. 또한 사용자가 강제 종료하기 전까지 계속 메시지를 받기 위해 대기상태에 있을 것이다",
          "broker를 설치한 ip를 확인해서 ip부분만 바꿔주자"
        ]
      },
      {
        "text": ["이제 hello 라는 topic으로 메세지를 전달해보자"]
      },
      {
        "terminal": "mosquitto_pub -h 52.79.239.7 -t \"hello\" -m \"hello world\"",
        "text": [
          "ip가 52.79.239.7 broker에 hello라는 topic으로 hello world 메시지를 전달한다"
        ]
      },
      {
        "img": ["MQTT 설치10.PNG"],
        "text": [
          "hello topic을 subcribe 한 쪽을 확인해 보면 메시지가 전달 된 것을 확인할 수 있다."
        ]
      }
    ]
  }
]
